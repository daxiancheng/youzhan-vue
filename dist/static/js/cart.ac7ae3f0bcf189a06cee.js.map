{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/mixin.js","webpack:///./src/pages/cart/cart.js"],"names":["url","hotLists","banner","topLiats","rank","sublist","srarchlist","goodsdetails","addcart","cartlist","removecart","mrremove","addressLists","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","mixin","filters","formatpirce","price","ps","indexOf","arr","split","substr","Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__cart_base_css__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_js_api_js__","__WEBPACK_IMPORTED_MODULE_5_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_6_qs__","__WEBPACK_IMPORTED_MODULE_7_axios__","__WEBPACK_IMPORTED_MODULE_7_axios___default","Vue","el","data","cartList","arrgood","currentShop","changegoodsnum","delectcart","delectDate","delectgoods","delectshop","editingShopIndex","methods","getcartlist","_this","this","axios","get","then","res","lists","forEach","shop","rmDelect","editing","editMsg","check","goodsList","goods","goodscheck","every","ele","checkshop","selectAll","rmAll","checkall","isEditing","index","item","i","changenum","num","number","rmgoods","shopindex","goodsindex","rmshop","removeConfirm","_this2","console","log","_delectDate","post","id","splice","length","ids","good","push","created","mixins","computed","set","newvalue","totalprice","arrgoods","p"],"mappings":"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","file":"static/js/cart.ac7ae3f0bcf189a06cee.js","sourcesContent":["let url = {\r\n    hotLists: 'index/hotLists',\r\n    banner: 'index/banner',\r\n    topLiats: 'category/topList',\r\n    rank: 'category/rank',\r\n    sublist: 'category/subList',\r\n    srarchlist: 'search/list',\r\n    goodsdetails: 'goods/details',\r\n    addcart: 'cart/add',\r\n    cartlist: 'cart/list',\r\n    removecart: 'cart/remove',\r\n    mrremove: 'cart/mrremove',\r\n    addressLists: '/address/list',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n}\r\n\r\nfor (let key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = 'http://rap2api.taobao.org/app/mock/7058/' + url[key]\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","let mixin={\r\n    filters:{\r\n        formatpirce(price){\r\n            let ps = price +''   \r\n            if(ps.indexOf('.')>-1){\r\n                let arr = ps.split('.')\r\n                return arr[0]+'.'+(arr[1]+'0').substr(0,2)\r\n        }else{\r\n            return ps+'.00'\r\n        }\r\n            }\r\n            \r\n    }\r\n}\r\n\r\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import './cart_base.css'\r\nimport './cart_trade.css'\r\nimport './cart.css'\r\n\r\nimport Vue from 'vue'\r\nimport url from 'js/api.js'\r\nimport mixin from 'js/mixin.js'\r\nimport qs from 'qs'\r\nimport axios from 'axios'\r\n\r\nnew Vue({\r\n    el: '#cart',\r\n    data: {\r\n        cartList: null,\r\n        arrgood: [],\r\n        currentShop: null,\r\n        changegoodsnum:1,\r\n        delectcart:false,\r\n        delectDate:null,\r\n        delectgoods:false,\r\n        delectshop:false,\r\n        editingShopIndex:-1\r\n    },\r\n    methods: {\r\n        getcartlist() {\r\n            axios.get(url.cartlist).then((res) => {\r\n                let lists = res.data.cartList\r\n                lists.forEach(shop => {\r\n                    shop.rmDelect = false\r\n                    shop.editing = false\r\n                    shop.editMsg = '编辑'\r\n                    shop.check = true\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.rmDelect = false\r\n                        goods.check = true\r\n                    })\r\n                });\r\n                this.cartList = lists\r\n            })\r\n        },\r\n        goodscheck(shop, goods) {\r\n            if (!this.currentShop) {\r\n                goods.check = !goods.check\r\n                if (shop.goodsList.every((ele) => {\r\n                    return ele.check\r\n                })) {\r\n                    shop.check = true\r\n                } else {\r\n                    shop.check = false\r\n                }\r\n            }else if(this.currentShop&&shop.editing){\r\n                goods.rmDelect = !goods.rmDelect\r\n                if (shop.goodsList.every((ele) => {\r\n                    return ele.rmDelect\r\n                })) {\r\n                    shop.rmDelect = true\r\n                } else {\r\n                    shop.rmDelect = false\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        checkshop(shop) {\r\n            if(!this.currentShop){\r\n                if (shop.check) {\r\n                    shop.check = false\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.check = false\r\n                    })\r\n                } else {\r\n                    shop.check = true\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.check = true\r\n                    })\r\n                }\r\n            }else if(this.currentShop&&shop.editing){\r\n                if (shop.rmDelect) {\r\n                    shop.rmDelect = false\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.rmDelect = false\r\n                    })\r\n                } else {\r\n                    shop.rmDelect = true\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.rmDelect = true\r\n                    })\r\n                }\r\n            }\r\n            \r\n        },\r\n        selectAll() {\r\n            if(!this.currentShop){\r\n                this.checkall = !this.checkall\r\n            }else{\r\n                this.rmAll = !this.rmAll\r\n            }\r\n            \r\n        },\r\n        isEditing(shop, index) {\r\n            // if(shop.editMsg==='编辑'){\r\n            //     shop.editMsg = '完成'\r\n            //     这是开始的想法。。\r\n            // }\r\n            shop.editing = !shop.editing\r\n            shop.editMsg = shop.editing ? '完成' : '编辑'\r\n            this.cartList.forEach((item, i) => {\r\n                if (i !== index) {\r\n                    item.editing = false\r\n                    item.editMsg = shop.editing ? '' : '编辑' //编辑的时候其他的店铺处于不能编辑状态，完成后可以编辑\r\n\r\n                }\r\n            })\r\n            this.currentShop = shop.editing ? shop : null //精髓啊\r\n            this.editingShopIndex = shop.editing ? index : -1\r\n        },\r\n        changenum(goods,num){\r\n            if(goods.number===1 && num<0){ //哎呀,这都想半天 真的是fw\r\n                return  \r\n            }\r\n            goods.number +=num\r\n\r\n        },\r\n        rmgoods(shop,shopindex,goods,goodsindex){\r\n            this.delectcart = true\r\n            this.delectgoods = true\r\n            this.delectDate = {shop,shopindex,goods,goodsindex}\r\n        },\r\n        rmshop(){\r\n            this.delectcart = true\r\n            this.delectshop = true\r\n        },\r\n        removeConfirm(){\r\n            console.log('........')\r\n            \r\n            if(this.delectgoods){\r\n                let {shop,shopindex,goods,goodsindex} = this.delectDate\r\n                axios.post(url.removecart,{\r\n                    id:goods.id\r\n                }).then(()=>{\r\n                    shop.goodsList.splice(goodsindex,1)\r\n                    if(!shop.goodsList.length){\r\n                        this.cartList.splice(shopindex,1)\r\n                        this.cartList.forEach((item)=>{ //店铺删除后，其他的店铺回复到编辑之前的状态\r\n                            item.editing = false\r\n                            item.editMsg = '编辑'\r\n                            this.editingShopIndex = -1\r\n                        })\r\n                    }\r\n                    this.delectcart = false\r\n                    this.delectgoods = false\r\n                    return\r\n                })\r\n            }\r\n            if(this.delectshop){\r\n                let ids = []\r\n                this.currentShop.goodsList.forEach((good)=>{\r\n                    ids.push(good.id)\r\n                })\r\n                axios.post(url.mrremove,{\r\n                    ids\r\n                }).then(()=>{\r\n                    this.cartList.splice(this.editingShopIndex,1)\r\n                    this.cartList.forEach((item)=>{ //店铺删除后，其他的店铺回复到编辑之前的状态\r\n                        item.editing = false\r\n                        item.editMsg = '编辑'\r\n                        this.editingShopIndex = -1\r\n                    })\r\n                    this.delectcart = false\r\n                    this.delectshop = false\r\n                })\r\n                console.log('quanxuan')\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.getcartlist()\r\n    },\r\n    mixins: [mixin],\r\n    computed: {\r\n        checkall: {\r\n            get() {\r\n                if (this.cartList) {\r\n                    return this.cartList.every((shop) => {\r\n                        return shop.check\r\n                    })\r\n                } else {\r\n                    return false\r\n                }\r\n            },\r\n            set(newvalue) {\r\n                this.cartList.forEach((shop) => {\r\n                    shop.check = newvalue\r\n                    shop.goodsList.forEach((goods) => {\r\n                        goods.check = newvalue\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        totalprice() {\r\n            let arrgoods = []\r\n            let p = 0\r\n            if (this.cartList) {\r\n                this.cartList.forEach((shop) => {\r\n                    shop.goodsList.forEach((goods) => {\r\n                        if (goods.check) {\r\n                            arrgoods.push(goods)\r\n                        }\r\n                    })\r\n                })\r\n                this.arrgood = arrgoods\r\n                arrgoods.forEach((goods) => {\r\n                    p += goods.price * goods.number\r\n                })\r\n                return p\r\n            }\r\n\r\n        },\r\n        rmAll:{\r\n            get(){\r\n                if(this.currentShop){\r\n                    // if(this.currentShop.rmDelect){\r\n                    //     return true\r\n                    // }else{\r\n                    //     return false\r\n                    // }\r\n                    return this.currentShop.rmDelect\r\n                }else{\r\n                    return false\r\n                } \r\n            },\r\n            set(newvalue){\r\n                this.currentShop.rmDelect = newvalue\r\n                this.currentShop.goodsList.forEach((goods)=>{\r\n                    goods.rmDelect = newvalue\r\n                })\r\n            }\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}